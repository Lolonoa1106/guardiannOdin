"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1856],{51856:(e,n,t)=>{t.r(n),t.d(n,{W3mModal:()=>u});var i=t(15933),o=t(54581),a=t(49333),s=t(26601),r=t(75133);function l(){let e=(0,i._)(["\n  :host {\n    z-index: var(--w3m-z-index);\n    display: block;\n    backface-visibility: hidden;\n    will-change: opacity;\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    pointer-events: none;\n    opacity: 0;\n    background-color: var(--wui-cover);\n    transition: opacity 0.2s var(--wui-ease-out-power-2);\n    will-change: opacity;\n  }\n\n  :host(.open) {\n    opacity: 1;\n  }\n\n  wui-card {\n    max-width: var(--w3m-modal-width);\n    width: 100%;\n    position: relative;\n    animation: zoom-in 0.2s var(--wui-ease-out-power-2);\n    animation-fill-mode: backwards;\n    outline: none;\n  }\n\n  wui-card[shake='true'] {\n    animation:\n      zoom-in 0.2s var(--wui-ease-out-power-2),\n      w3m-shake 0.5s var(--wui-ease-out-power-2);\n  }\n\n  wui-flex {\n    overflow-x: hidden;\n    overflow-y: auto;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    height: 100%;\n  }\n\n  @media (max-height: 700px) and (min-width: 431px) {\n    wui-flex {\n      align-items: flex-start;\n    }\n\n    wui-card {\n      margin: var(--wui-spacing-xxl) 0px;\n    }\n  }\n\n  @media (max-width: 430px) {\n    wui-flex {\n      align-items: flex-end;\n    }\n\n    wui-card {\n      max-width: 100%;\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n      border-bottom: none;\n      animation: slide-in 0.2s var(--wui-ease-out-power-2);\n    }\n\n    wui-card[shake='true'] {\n      animation:\n        slide-in 0.2s var(--wui-ease-out-power-2),\n        w3m-shake 0.5s var(--wui-ease-out-power-2);\n    }\n  }\n\n  @keyframes zoom-in {\n    0% {\n      transform: scale(0.95) translateY(0);\n    }\n    100% {\n      transform: scale(1) translateY(0);\n    }\n  }\n\n  @keyframes slide-in {\n    0% {\n      transform: scale(1) translateY(50px);\n    }\n    100% {\n      transform: scale(1) translateY(0);\n    }\n  }\n\n  @keyframes w3m-shake {\n    0% {\n      transform: scale(1) rotate(0deg);\n    }\n    20% {\n      transform: scale(1) rotate(-1deg);\n    }\n    40% {\n      transform: scale(1) rotate(1.5deg);\n    }\n    60% {\n      transform: scale(1) rotate(-1.5deg);\n    }\n    80% {\n      transform: scale(1) rotate(1deg);\n    }\n    100% {\n      transform: scale(1) rotate(0deg);\n    }\n  }\n\n  @keyframes w3m-view-height {\n    from {\n      height: var(--prev-height);\n    }\n    to {\n      height: var(--new-height);\n    }\n  }\n"]);return l=function(){return e},e}let d=(0,s.AH)(l());function c(){let e=(0,i._)(["\n          <wui-flex @click=",' data-testid="w3m-modal-overlay">\n            <wui-card\n              shake="','"\n              role="alertdialog"\n              aria-modal="true"\n              tabindex="0"\n              data-testid="w3m-modal-card"\n            >\n              <w3m-header></w3m-header>\n              <w3m-router></w3m-router>\n              <w3m-snackbar></w3m-snackbar>\n            </wui-card>\n          </wui-flex>\n          <w3m-tooltip></w3m-tooltip>\n        ']);return c=function(){return e},e}var h=function(e,n,t,i){var o,a=arguments.length,s=a<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,n,t,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(n,t,s):o(n,t))||s);return a>3&&s&&Object.defineProperty(n,t,s),s};let w="scroll-lock",u=class extends s.WF{disconnectedCallback(){this.unsubscribe.forEach(e=>e()),this.onRemoveKeyboardListener()}render(){return this.open?(0,s.qy)(c(),this.onOverlayClick.bind(this),this.shake):null}async onOverlayClick(e){e.target===e.currentTarget&&await this.handleClose()}async handleClose(){let e="ConnectingSiwe"===o.IN.state.view,n="ApproveTransaction"===o.IN.state.view;if(this.isSiweEnabled){let{SIWEController:i}=await Promise.all([t.e(3597),t.e(1681)]).then(t.bind(t,61382));"success"!==i.state.status&&(e||n)?o.W3.shake():o.W3.close()}else o.W3.close()}initializeTheming(){let{themeVariables:e,themeMode:n}=o.Wn.state,t=a.UiHelperUtil.getColorTheme(n);(0,a.initializeTheming)(e,t)}onClose(){this.open=!1,this.classList.remove("open"),this.onScrollUnlock(),o.Pt.hide(),this.onRemoveKeyboardListener()}onOpen(){this.open=!0,this.classList.add("open"),this.onScrollLock(),this.onAddKeyboardListener()}onScrollLock(){let e=document.createElement("style");e.dataset.w3m=w,e.textContent="\n      body {\n        touch-action: none;\n        overflow: hidden;\n        overscroll-behavior: contain;\n      }\n      w3m-modal {\n        pointer-events: auto;\n      }\n    ",document.head.appendChild(e)}onScrollUnlock(){let e=document.head.querySelector('style[data-w3m="'.concat(w,'"]'));e&&e.remove()}onAddKeyboardListener(){var e;this.abortController=new AbortController;let n=null==(e=this.shadowRoot)?void 0:e.querySelector("wui-card");null==n||n.focus(),window.addEventListener("keydown",e=>{if("Escape"===e.key)this.handleClose();else if("Tab"===e.key){let{tagName:t}=e.target;!t||t.includes("W3M-")||t.includes("WUI-")||null==n||n.focus()}},this.abortController)}onRemoveKeyboardListener(){var e;null==(e=this.abortController)||e.abort(),this.abortController=void 0}async onNewAddress(e){if(!this.connected||this.loading)return;let n=o.wE.getPlainAddress(this.caipAddress),i=o.wE.getPlainAddress(e),a=o.wE.getNetworkId(this.caipAddress),s=o.wE.getNetworkId(e);if(this.caipAddress=e,this.isSiweEnabled){var r,l;let{SIWEController:e}=await Promise.all([t.e(3597),t.e(1681)]).then(t.bind(t,61382)),o=await e.getSession();if(o&&n&&i&&n!==i){(null==(r=e.state._client)?void 0:r.options.signOutOnAccountChange)&&(await e.signOut(),this.onSiweNavigation());return}if(o&&a&&s&&a!==s){(null==(l=e.state._client)?void 0:l.options.signOutOnNetworkChange)&&(await e.signOut(),this.onSiweNavigation());return}this.onSiweNavigation()}}onSiweNavigation(){this.open?o.IN.push("ConnectingSiwe"):o.W3.open({view:"ConnectingSiwe"})}constructor(){super(),this.unsubscribe=[],this.abortController=void 0,this.open=o.W3.state.open,this.caipAddress=o.Uj.state.caipAddress,this.isSiweEnabled=o.Hd.state.isSiweEnabled,this.connected=o.Uj.state.isConnected,this.loading=o.W3.state.loading,this.shake=o.W3.state.shake,this.initializeTheming(),o.Np.prefetch(),this.unsubscribe.push(o.W3.subscribeKey("open",e=>e?this.onOpen():this.onClose()),o.W3.subscribeKey("shake",e=>this.shake=e),o.W3.subscribeKey("loading",e=>{this.loading=e,this.onNewAddress(o.Uj.state.caipAddress)}),o.Uj.subscribeKey("isConnected",e=>this.connected=e),o.Uj.subscribeKey("caipAddress",e=>this.onNewAddress(e)),o.Hd.subscribeKey("isSiweEnabled",e=>this.isSiweEnabled=e)),o.En.sendEvent({type:"track",event:"MODAL_LOADED"})}};u.styles=d,h([(0,r.wk)()],u.prototype,"open",void 0),h([(0,r.wk)()],u.prototype,"caipAddress",void 0),h([(0,r.wk)()],u.prototype,"isSiweEnabled",void 0),h([(0,r.wk)()],u.prototype,"connected",void 0),h([(0,r.wk)()],u.prototype,"loading",void 0),h([(0,r.wk)()],u.prototype,"shake",void 0),u=h([(0,a.customElement)("w3m-modal")],u)}}]);